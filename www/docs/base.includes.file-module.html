<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>base.includes.file</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="base-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="base-module.html">Package&nbsp;base</a> ::
        <a href="base.includes-module.html">Package&nbsp;includes</a> ::
        Module&nbsp;file
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="base.includes.file-module.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== MODULE DESCRIPTION ==================== -->
<h1 class="epydoc">Module file</h1><p class="nomargin-top"><span class="codelink"><a href="base.includes.file-pysrc.html">source&nbsp;code</a></span></p>
<pre class="literalblock">

@package Drupy
@see http://drupy.net
@note Drupy is a port of the Drupal project.
 The Drupal project can be found at http://drupal.org
@file file.py (ported from Drupal's file.inc)
 API for handling file uploads and server file management.
@author Brendon Crawford
@copyright 2008 Brendon Crawford
@contact message144 at users dot sourceforge dot net
@created 2008-01-10
@version 0.1
@license: 

 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.

</pre>

<!-- ==================== FUNCTIONS ==================== -->
<a name="section-Functions"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Functions</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Functions"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.file-module.html#file_create_url" class="summary-sig-name">file_create_url</a>(<span class="summary-sig-arg">path</span>)</span><br />
      Create the download path to a file.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.file-pysrc.html#file_create_url">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.file-module.html#file_create_path" class="summary-sig-name">file_create_path</a>(<span class="summary-sig-arg">dest</span>=<span class="summary-sig-default">0</span>)</span><br />
      Make sure the destination is a complete path and resides in the file system
directory, if it is not prepend the file system directory.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.file-pysrc.html#file_create_path">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.file-module.html#file_check_directory" class="summary-sig-name">file_check_directory</a>(<span class="summary-sig-arg">directory</span>,
        <span class="summary-sig-arg">mode</span>=<span class="summary-sig-default">0</span>,
        <span class="summary-sig-arg">form_item</span>=<span class="summary-sig-default">None</span>)</span><br />
      Check that the directory exists and is writable + Directories need to
have execute permissions to be considered a directory by FTP servers, etc.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.file-pysrc.html#file_check_directory">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.file-module.html#file_check_path" class="summary-sig-name">file_check_path</a>(<span class="summary-sig-arg">path</span>)</span><br />
      Checks path to see if it is a directory, or a dir/file.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.file-pysrc.html#file_check_path">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.file-module.html#file_check_location" class="summary-sig-name">file_check_location</a>(<span class="summary-sig-arg">source</span>,
        <span class="summary-sig-arg">directory</span>=<span class="summary-sig-default">''</span>)</span><br />
      Check if a file is really located inside directory + Should be used to make
sure a file specified is really located within the directory to prevent
exploits.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.file-pysrc.html#file_check_location">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.file-module.html#file_copy" class="summary-sig-name">file_copy</a>(<span class="summary-sig-arg">source</span>,
        <span class="summary-sig-arg">dest</span>=<span class="summary-sig-default">0</span>,
        <span class="summary-sig-arg">replace</span>=<span class="summary-sig-default">FILE_EXISTS_RENAME</span>)</span><br />
      Copies a file to a new location + This is a powerful function that in many ways
performs like an advanced version of copy().</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.file-pysrc.html#file_copy">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.file-module.html#file_destination" class="summary-sig-name">file_destination</a>(<span class="summary-sig-arg">destination</span>,
        <span class="summary-sig-arg">replace</span>)</span><br />
      Determines the destination path for a file depending on how replacement of
existing files should be handled.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.file-pysrc.html#file_destination">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.file-module.html#file_move" class="summary-sig-name">file_move</a>(<span class="summary-sig-arg">source</span>,
        <span class="summary-sig-arg">dest</span>=<span class="summary-sig-default">0</span>,
        <span class="summary-sig-arg">replace</span>=<span class="summary-sig-default">FILE_EXISTS_RENAME</span>)</span><br />
      Moves a file to a new location.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.file-pysrc.html#file_move">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.file-module.html#file_munge_filename" class="summary-sig-name">file_munge_filename</a>(<span class="summary-sig-arg">filename</span>,
        <span class="summary-sig-arg">extensions</span>,
        <span class="summary-sig-arg">alerts</span>=<span class="summary-sig-default">True</span>)</span><br />
      Munge the filename as needed for security purposes + For instance the file
name &quot;exploit.php.pps&quot; would become &quot;exploit.php_.pps&quot;.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.file-pysrc.html#file_munge_filename">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.file-module.html#file_unmunge_filename" class="summary-sig-name">file_unmunge_filename</a>(<span class="summary-sig-arg">filename</span>)</span><br />
      Undo the effect of upload_munge_filename().</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.file-pysrc.html#file_unmunge_filename">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.file-module.html#file_create_filename" class="summary-sig-name">file_create_filename</a>(<span class="summary-sig-arg">basename</span>,
        <span class="summary-sig-arg">directory</span>)</span><br />
      Create a full file path from a directory and filename + If a file 
      with the specified name already exists, an alternative will be used.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.file-pysrc.html#file_create_filename">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.file-module.html#file_delete" class="summary-sig-name">file_delete</a>(<span class="summary-sig-arg">path</span>)</span><br />
      Delete a file.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.file-pysrc.html#file_delete">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.file-module.html#file_space_used" class="summary-sig-name">file_space_used</a>(<span class="summary-sig-arg">uid</span>=<span class="summary-sig-default">None</span>)</span><br />
      Determine total disk space used by a single user or the whole filesystem.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.file-pysrc.html#file_space_used">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.file-module.html#file_save_upload" class="summary-sig-name">file_save_upload</a>(<span class="summary-sig-arg">source</span>,
        <span class="summary-sig-arg">validators</span>=<span class="summary-sig-default">{}</span>,
        <span class="summary-sig-arg">dest</span>=<span class="summary-sig-default">False</span>,
        <span class="summary-sig-arg">replace</span>=<span class="summary-sig-default">FILE_EXISTS_RENAME</span>)</span><br />
      Saves a file upload to a new location + The source file is validated as a
proper upload and handled as such.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.file-pysrc.html#file_save_upload">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.file-module.html#file_validate_name_length" class="summary-sig-name">file_validate_name_length</a>(<span class="summary-sig-arg">file</span>)</span><br />
      Check for files with names longer than we can store in the database.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.file-pysrc.html#file_validate_name_length">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.file-module.html#file_validate_extensions" class="summary-sig-name">file_validate_extensions</a>(<span class="summary-sig-arg">file</span>,
        <span class="summary-sig-arg">extensions</span>)</span><br />
      Check that the filename ends with an allowed extension + This check is not
enforced for the user #1.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.file-pysrc.html#file_validate_extensions">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.file-module.html#file_validate_size" class="summary-sig-name">file_validate_size</a>(<span class="summary-sig-arg">file</span>,
        <span class="summary-sig-arg">file_limit</span>=<span class="summary-sig-default">0</span>,
        <span class="summary-sig-arg">user_limit</span>=<span class="summary-sig-default">0</span>)</span><br />
      Check that the file's size is below certain limits + This check is not
enforced for the user #1.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.file-pysrc.html#file_validate_size">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.file-module.html#file_validate_is_image" class="summary-sig-name">file_validate_is_image</a>(<span class="summary-sig-arg">file</span>)</span><br />
      Check that the file is recognized by image_get_info() as an image.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.file-pysrc.html#file_validate_is_image">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.file-module.html#file_validate_image_resolution" class="summary-sig-name">file_validate_image_resolution</a>(<span class="summary-sig-arg">file</span>,
        <span class="summary-sig-arg">maximum_dimensions</span>=<span class="summary-sig-default">0</span>,
        <span class="summary-sig-arg">minimum_dimensions</span>=<span class="summary-sig-default">0</span>)</span><br />
      If the file is an image verify that its dimensions are within the specified
maximum and minimum dimensions + Non-image files will be ignored.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.file-pysrc.html#file_validate_image_resolution">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.file-module.html#file_save_data" class="summary-sig-name">file_save_data</a>(<span class="summary-sig-arg">data</span>,
        <span class="summary-sig-arg">dest</span>,
        <span class="summary-sig-arg">replace</span>=<span class="summary-sig-default">FILE_EXISTS_RENAME</span>)</span><br />
      Save a string to the specified destination.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.file-pysrc.html#file_save_data">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.file-module.html#file_set_status" class="summary-sig-name">file_set_status</a>(<span class="summary-sig-arg">file</span>,
        <span class="summary-sig-arg">status</span>)</span><br />
      Set the status of a file.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.file-pysrc.html#file_set_status">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.file-module.html#file_transfer" class="summary-sig-name">file_transfer</a>(<span class="summary-sig-arg">source</span>,
        <span class="summary-sig-arg">headers</span>)</span><br />
      Transfer file using http to client + Pipes a file through Drupal to 
      the client.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.file-pysrc.html#file_transfer">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="file_download"></a><span class="summary-sig-name">file_download</span>()</span><br />
      Call modules that implement hook_file_download() to find out if a 
      file is accessible and what headers it should be transferred with + 
      If a module returns -1 drupal_access_denied() will be returned + If 
      one or more modules returned headers the download will start with the
      returned headers + If no modules respond drupal_not_found() will be 
      returned.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.file-pysrc.html#file_download">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.file-module.html#file_scan_directory" class="summary-sig-name">file_scan_directory</a>(<span class="summary-sig-arg">dir</span>,
        <span class="summary-sig-arg">mask</span>,
        <span class="summary-sig-arg">nomask</span>=<span class="summary-sig-default">['.','..','CVS']</span>,
        <span class="summary-sig-arg">callback</span>=<span class="summary-sig-default">0</span>,
        <span class="summary-sig-arg">recurse</span>=<span class="summary-sig-default">True</span>,
        <span class="summary-sig-arg">key</span>=<span class="summary-sig-default">'filename'</span>,
        <span class="summary-sig-arg">min_depth</span>=<span class="summary-sig-default">0</span>,
        <span class="summary-sig-arg">depth</span>=<span class="summary-sig-default">0</span>)</span><br />
      Finds all files that match a given mask in a given directory.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.file-pysrc.html#file_scan_directory">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.file-module.html#file_directory_temp" class="summary-sig-name">file_directory_temp</a>()</span><br />
      Determine the default temporary directory.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.file-pysrc.html#file_directory_temp">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.file-module.html#file_directory_path" class="summary-sig-name">file_directory_path</a>()</span><br />
      Determine the default 'files' directory.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.file-pysrc.html#file_directory_path">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.file-module.html#file_upload_max_size" class="summary-sig-name">file_upload_max_size</a>()</span><br />
      Determine the maximum file upload size by querying the PHP settings.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.file-pysrc.html#file_upload_max_size">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== VARIABLES ==================== -->
<a name="section-Variables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Variables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="FILE_DOWNLOADS_PUBLIC"></a><span class="summary-name">FILE_DOWNLOADS_PUBLIC</span> = <code title="1">1</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="FILE_DOWNLOADS_PRIVATE"></a><span class="summary-name">FILE_DOWNLOADS_PRIVATE</span> = <code title="2">2</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="FILE_CREATE_DIRECTORY"></a><span class="summary-name">FILE_CREATE_DIRECTORY</span> = <code title="1">1</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="FILE_MODIFY_PERMISSIONS"></a><span class="summary-name">FILE_MODIFY_PERMISSIONS</span> = <code title="2">2</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="FILE_EXISTS_RENAME"></a><span class="summary-name">FILE_EXISTS_RENAME</span> = <code title="0">0</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="FILE_EXISTS_REPLACE"></a><span class="summary-name">FILE_EXISTS_REPLACE</span> = <code title="1">1</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="FILE_EXISTS_ERROR"></a><span class="summary-name">FILE_EXISTS_ERROR</span> = <code title="2">2</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="FILE_STATUS_TEMPORARY"></a><span class="summary-name">FILE_STATUS_TEMPORARY</span> = <code title="0">0</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="FILE_STATUS_PERMANENT"></a><span class="summary-name">FILE_STATUS_PERMANENT</span> = <code title="1">1</code>
    </td>
  </tr>
</table>
<!-- ==================== FUNCTION DETAILS ==================== -->
<a name="section-FunctionDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Function Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-FunctionDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="file_create_url"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">file_create_url</span>(<span class="sig-arg">path</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.file-pysrc.html#file_create_url">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Create the download path to a file.</p>
  <p>@param path A string containing the path of the file to generate URL 
  for. @return A string containing a URL that can be used to download the 
  file.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="file_create_path"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">file_create_path</span>(<span class="sig-arg">dest</span>=<span class="sig-default">0</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.file-pysrc.html#file_create_path">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Make sure the destination is a complete path and resides in the file system
directory, if it is not prepend the file system directory.

@param dest A string containing the path to verify + If this value is
  omitted, Drupal's 'files' directory will be used.
@return A string containing the path to file, with file system directory
  appended if necessary, or False if the path is invalid (i.e + outside the
  configured 'files' or temp directories).

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="file_check_directory"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">file_check_directory</span>(<span class="sig-arg">directory</span>,
        <span class="sig-arg">mode</span>=<span class="sig-default">0</span>,
        <span class="sig-arg">form_item</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.file-pysrc.html#file_check_directory">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Check that the directory exists and is writable + Directories need to
have execute permissions to be considered a directory by FTP servers, etc.

@param directory A string containing the name of a directory path.
@param mode A Boolean value to indicate if the directory should be created
  if it does not exist or made writable if it is read-only.
@param form_item An optional string containing the name of a form item that
  any errors will be attached to + This is useful for settings forms that
  require the user to specify a writable directory + If it can't be made to
  work, a form error will be set preventing them from saving the settings.
@return False when directory not found, or True when directory exists.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="file_check_path"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">file_check_path</span>(<span class="sig-arg">path</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.file-pysrc.html#file_check_path">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Checks path to see if it is a directory, or a dir/file.

@param path A string containing a file path + This will be set to the
  directory's path.
@return If the directory is not in a Drupal writable directory, False is
  returned + Otherwise, the base name of the path is returned.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="file_check_location"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">file_check_location</span>(<span class="sig-arg">source</span>,
        <span class="sig-arg">directory</span>=<span class="sig-default">''</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.file-pysrc.html#file_check_location">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Check if a file is really located inside directory + Should be used to make
sure a file specified is really located within the directory to prevent
exploits.

@code
  // Returns False:
  file_check_location('/www/example.com/files/../../../etc/passwd', '/www/example.com/files')
@endcode

@param source A string set to the file to check.
@param directory A string where the file should be located.
@return 0 for invalid path or the real path of the source.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="file_copy"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">file_copy</span>(<span class="sig-arg">source</span>,
        <span class="sig-arg">dest</span>=<span class="sig-default">0</span>,
        <span class="sig-arg">replace</span>=<span class="sig-default">FILE_EXISTS_RENAME</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.file-pysrc.html#file_copy">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Copies a file to a new location + This is a powerful function that in many ways
performs like an advanced version of copy().
- Checks if source and dest are valid and readable/writable.
- Performs a file copy if source is not equal to dest.
- If file already exists in dest either the call will error out, replace the
  file or rename the file based on the replace parameter.

@param source A string specifying the file location of the original file.
  This parameter will contain the resulting destination filename in case of
  success.
@param dest A string containing the directory source should be copied to.
  If this value is omitted, Drupal's 'files' directory will be used.
@param replace Replace behavior when the destination file already exists.
  - FILE_EXISTS_REPLACE - Replace the existing file
  - FILE_EXISTS_RENAME - Append _{incrementing number} until the filename is unique
  - FILE_EXISTS_ERROR - Do nothing and return False.
@return True for success, False for failure.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="file_destination"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">file_destination</span>(<span class="sig-arg">destination</span>,
        <span class="sig-arg">replace</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.file-pysrc.html#file_destination">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Determines the destination path for a file depending on how replacement of
existing files should be handled.

@param destination A string specifying the desired path.
@param replace Replace behavior when the destination file already exists.
  - FILE_EXISTS_REPLACE - Replace the existing file
  - FILE_EXISTS_RENAME - Append _{incrementing number} until the filename is
    unique
  - FILE_EXISTS_ERROR - Do nothing and return False.
@return The destination file path or False if the file already exists and
  FILE_EXISTS_ERROR was specified.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="file_move"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">file_move</span>(<span class="sig-arg">source</span>,
        <span class="sig-arg">dest</span>=<span class="sig-default">0</span>,
        <span class="sig-arg">replace</span>=<span class="sig-default">FILE_EXISTS_RENAME</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.file-pysrc.html#file_move">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Moves a file to a new location.
- Checks if source and dest are valid and readable/writable.
- Performs a file move if source is not equal to dest.
- If file already exists in dest either the call will error out, replace the
  file or rename the file based on the replace parameter.

@param source A string specifying the file location of the original file.
  This parameter will contain the resulting destination filename in case of
  success.
@param dest A string containing the directory source should be copied to.
  If this value is omitted, Drupal's 'files' directory will be used.
@param replace Replace behavior when the destination file already exists.
  - FILE_EXISTS_REPLACE - Replace the existing file
  - FILE_EXISTS_RENAME - Append _{incrementing number} until the filename is unique
  - FILE_EXISTS_ERROR - Do nothing and return False.
@return True for success, False for failure.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="file_munge_filename"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">file_munge_filename</span>(<span class="sig-arg">filename</span>,
        <span class="sig-arg">extensions</span>,
        <span class="sig-arg">alerts</span>=<span class="sig-default">True</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.file-pysrc.html#file_munge_filename">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Munge the filename as needed for security purposes + For instance the file
name &quot;exploit.php.pps&quot; would become &quot;exploit.php_.pps&quot;.

@param filename The name of a file to modify.
@param extensions A space separated list of extensions that should not
  be altered.
@param alerts Whether alerts (watchdog, drupal_set_message()) should be
  displayed.
@return filename The potentially modified filename.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="file_unmunge_filename"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">file_unmunge_filename</span>(<span class="sig-arg">filename</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.file-pysrc.html#file_unmunge_filename">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Undo the effect of upload_munge_filename().</p>
  <p>@param filename string filename @return string</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="file_create_filename"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">file_create_filename</span>(<span class="sig-arg">basename</span>,
        <span class="sig-arg">directory</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.file-pysrc.html#file_create_filename">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Create a full file path from a directory and filename + If a file with
  the specified name already exists, an alternative will be used.</p>
  <p>@param basename string filename @param directory string directory 
  @return</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="file_delete"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">file_delete</span>(<span class="sig-arg">path</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.file-pysrc.html#file_delete">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Delete a file.</p>
  <p>@param path A string containing a file path. @return True for success,
  False for failure.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="file_space_used"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">file_space_used</span>(<span class="sig-arg">uid</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.file-pysrc.html#file_space_used">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Determine total disk space used by a single user or the whole filesystem.

@param uid
  An optional user id + A None value returns the total space used
  by all files.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="file_save_upload"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">file_save_upload</span>(<span class="sig-arg">source</span>,
        <span class="sig-arg">validators</span>=<span class="sig-default">{}</span>,
        <span class="sig-arg">dest</span>=<span class="sig-default">False</span>,
        <span class="sig-arg">replace</span>=<span class="sig-default">FILE_EXISTS_RENAME</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.file-pysrc.html#file_save_upload">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Saves a file upload to a new location + The source file is validated as a
proper upload and handled as such.

The file will be added to the files table as a temporary file + Temporary files
are periodically cleaned + To make the file permanent file call
file_set_status() to change its status.

@param source
  A string specifying the name of the upload field to save.
@param validators
  An optional, associative array of callback functions used to validate the
  file + The keys are function names and the values arrays of callback
  parameters which will be passed in after the user and file objects + The
  functions should return an array of error messages, an empty array
  indicates that the file passed validation + The functions will be called in
  the order specified.
@param dest
  A string containing the directory source should be copied to + If this is
  not provided or is not writable, the temporary directory will be used.
@param replace
  A boolean indicating whether an existing file of the same name in the
  destination directory should overwritten + A False value will generate a
  new, unique filename in the destination directory.
@return
  An object containing the file information, or 0 in the event of an error.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="file_validate_name_length"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">file_validate_name_length</span>(<span class="sig-arg">file</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.file-pysrc.html#file_validate_name_length">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Check for files with names longer than we can store in the database.

@param file
  A Drupal file object.
@return
  An array + If the file name is too long, it will contain an error message.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="file_validate_extensions"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">file_validate_extensions</span>(<span class="sig-arg">file</span>,
        <span class="sig-arg">extensions</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.file-pysrc.html#file_validate_extensions">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Check that the filename ends with an allowed extension + This check is not
enforced for the user #1.

@param file
  A Drupal file object.
@param extensions
  A string with a space separated
@return
  An array + If the file extension is not allowed, it will contain an error message.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="file_validate_size"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">file_validate_size</span>(<span class="sig-arg">file</span>,
        <span class="sig-arg">file_limit</span>=<span class="sig-default">0</span>,
        <span class="sig-arg">user_limit</span>=<span class="sig-default">0</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.file-pysrc.html#file_validate_size">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Check that the file's size is below certain limits + This check is not
enforced for the user #1.

@param file
  A Drupal file object.
@param file_limit
  An integer specifying the maximum file size in bytes + Zero indicates that
  no limit should be enforced.
@param $user_limit
  An integer specifying the maximum number of bytes the user is allowed + Zero
  indicates that no limit should be enforced.
@return
  An array + If the file size exceeds limits, it will contain an error message.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="file_validate_is_image"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">file_validate_is_image</span>(<span class="sig-arg">file</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.file-pysrc.html#file_validate_is_image">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Check that the file is recognized by image_get_info() as an image.

@param file
  A Drupal file object.
@return
  An array + If the file is not an image, it will contain an error message.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="file_validate_image_resolution"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">file_validate_image_resolution</span>(<span class="sig-arg">file</span>,
        <span class="sig-arg">maximum_dimensions</span>=<span class="sig-default">0</span>,
        <span class="sig-arg">minimum_dimensions</span>=<span class="sig-default">0</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.file-pysrc.html#file_validate_image_resolution">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

If the file is an image verify that its dimensions are within the specified
maximum and minimum dimensions + Non-image files will be ignored.

@param file
  A Drupal file object + This function may resize the file affecting its size.
@param maximum_dimensions
  An optional string in the form WIDTHxHEIGHT e.g + '640x480' or '85x85'. If
  an image toolkit is installed the image will be resized down to these
  dimensions + A value of 0 indicates no restriction on size, so resizing
  will be attempted.
@param minimum_dimensions
  An optional string in the form WIDTHxHEIGHT + This will check that the image
  meets a minimum size + A value of 0 indicates no restriction.
@return
  An array + If the file is an image and did not meet the requirements, it
  will contain an error message.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="file_save_data"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">file_save_data</span>(<span class="sig-arg">data</span>,
        <span class="sig-arg">dest</span>,
        <span class="sig-arg">replace</span>=<span class="sig-default">FILE_EXISTS_RENAME</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.file-pysrc.html#file_save_data">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Save a string to the specified destination.</p>
  <p>@param data A string containing the contents of the file. @param dest 
  A string containing the destination location. @param replace Replace 
  behavior when the destination file already exists.</p>
  <ul>
    <li>
      FILE_EXISTS_REPLACE - Replace the existing file
    </li>
    <li>
      FILE_EXISTS_RENAME - Append _{incrementing number} until the filename
      is unique
    </li>
    <li>
      FILE_EXISTS_ERROR - Do nothing and return False.
    </li>
  </ul>
  <p>@return A string containing the resulting filename or 0 on error</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="file_set_status"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">file_set_status</span>(<span class="sig-arg">file</span>,
        <span class="sig-arg">status</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.file-pysrc.html#file_set_status">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Set the status of a file.

@param file A Drupal file object
@param status A status value to set the file to.
@return False on failure, True on success and file.status will contain the
    status.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="file_transfer"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">file_transfer</span>(<span class="sig-arg">source</span>,
        <span class="sig-arg">headers</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.file-pysrc.html#file_transfer">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Transfer file using http to client + Pipes a file through Drupal to 
  the client.</p>
  <p>@param source File to transfer. @param headers An array of http 
  headers to send along with file.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="file_scan_directory"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">file_scan_directory</span>(<span class="sig-arg">dir</span>,
        <span class="sig-arg">mask</span>,
        <span class="sig-arg">nomask</span>=<span class="sig-default">['.','..','CVS']</span>,
        <span class="sig-arg">callback</span>=<span class="sig-default">0</span>,
        <span class="sig-arg">recurse</span>=<span class="sig-default">True</span>,
        <span class="sig-arg">key</span>=<span class="sig-default">'filename'</span>,
        <span class="sig-arg">min_depth</span>=<span class="sig-default">0</span>,
        <span class="sig-arg">depth</span>=<span class="sig-default">0</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.file-pysrc.html#file_scan_directory">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Finds all files that match a given mask in a given directory.
Directories and files beginning with a period are excluded; this
prevents hidden files and directories (such as SVN working directories)
from being scanned.

@param dir
  The base directory for the scan, without trailing slash.
@param mask
  The regular expression of the files to find.
@param nomask
  An array of files/directories to ignore.
@param callback
  The callback function to call for each match.
@param recurse
  When True, the directory scan will recurse the entire tree
  starting at the provided directory.
@param key
  The key to be used for the returned array of files + Possible
  values are &quot;filename&quot;, for the path starting with dir,
  &quot;basename&quot;, for the basename of the file, and &quot;name&quot; for the name
  of the file without an extension.
@param min_depth
  Minimum depth of directories to return files from.
@param depth
  Current depth of recursion + This parameter is only used internally and should not be passed.

@return
  An associative array (keyed on the provided key) of objects with
  &quot;path&quot;, &quot;basename&quot;, and &quot;name&quot; members corresponding to the
  matching files.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="file_directory_temp"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">file_directory_temp</span>()</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.file-pysrc.html#file_directory_temp">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Determine the default temporary directory.</p>
  <p>@return A string containing a temp directory.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="file_directory_path"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">file_directory_path</span>()</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.file-pysrc.html#file_directory_path">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Determine the default 'files' directory.</p>
  <p>@return A string containing the path to Drupal's 'files' 
  directory.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="file_upload_max_size"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">file_upload_max_size</span>()</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.file-pysrc.html#file_upload_max_size">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Determine the maximum file upload size by querying the PHP settings.

@return
  A file size limit in bytes based on the PHP upload_max_filesize and post_max_size

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="base-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Fri Jun 27 15:00:06 2008
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
