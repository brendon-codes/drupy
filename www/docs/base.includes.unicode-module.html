<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>base.includes.unicode</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="base-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="base-module.html">Package&nbsp;base</a> ::
        <a href="base.includes-module.html">Package&nbsp;includes</a> ::
        Module&nbsp;unicode
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== MODULE DESCRIPTION ==================== -->
<h1 class="epydoc">Module unicode</h1><p class="nomargin-top"><span class="codelink"><a href="base.includes.unicode-pysrc.html">source&nbsp;code</a></span></p>
Drupal Unicode helpers.

<hr />
<div class="fields">      <dl><dt>See Also:</dt>
        <dd>
          <a href='http://drupy.net'>Drupy Homepage</a>,
          <a href='http://drupal.org'>Drupal Homepage</a>
        </dd>
      </dl>
      <strong>Notes:</strong>
      <ul class="nomargin-top">
        <li>
        Drupy is a port of the Drupal project.
        </li>
        <li>
        This file was ported from Drupal's includes/unicode.inc
        </li>
        <li>
        License:

  This program is free software; you can redistribute it and/or
  modify it under the terms of the GNU General Public License
  as published by the Free Software Foundation; either version 2
  of the License, or (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with this program; if not, write to:
  
  The Free Software Foundation, Inc.,
  51 Franklin Street, Fifth Floor,
  Boston, MA  02110-1301,
  USA
        </li>
      </ul>
      <p><strong>Author:</strong>
        Brendon Crawford
      </p>
      <p><strong>Copyright:</strong>
        2008 Brendon Crawford
      </p>
      <p><strong>Contact:</strong>
        message144 at users dot sourceforge dot net
      </p>
      <p><strong>Version:</strong>
        0.1
      </p>
</div><!-- ==================== FUNCTIONS ==================== -->
<a name="section-Functions"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Functions</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Functions"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="unicode_check"></a><span class="summary-sig-name">unicode_check</span>()</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.unicode-pysrc.html#unicode_check">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.unicode-module.html#_unicode_check" class="summary-sig-name" onclick="show_private();">_unicode_check</a>()</span><br />
      Perform checks about Unicode support in PHP, and set the right settings if
needed.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.unicode-pysrc.html#_unicode_check">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="unicode_requirements"></a><span class="summary-sig-name">unicode_requirements</span>()</span><br />
      Return Unicode library status and errors.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.unicode-pysrc.html#unicode_requirements">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.unicode-module.html#drupal_xml_parser_create" class="summary-sig-name">drupal_xml_parser_create</a>(<span class="summary-sig-arg">data</span>)</span><br />
      Prepare a new XML parser.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.unicode-pysrc.html#drupal_xml_parser_create">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.unicode-module.html#drupal_convert_to_utf8" class="summary-sig-name">drupal_convert_to_utf8</a>(<span class="summary-sig-arg">data</span>,
        <span class="summary-sig-arg">encoding</span>)</span><br />
      Convert data to UTF-8

Requires the iconv, GNU recode or mbstring PHP extension.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.unicode-pysrc.html#drupal_convert_to_utf8">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.unicode-module.html#drupal_truncate_bytes" class="summary-sig-name">drupal_truncate_bytes</a>(<span class="summary-sig-arg">string_</span>,
        <span class="summary-sig-arg">len_</span>)</span><br />
      Truncate a UTF-8-encoded string safely to a number of bytes.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.unicode-pysrc.html#drupal_truncate_bytes">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.unicode-module.html#truncate_utf8" class="summary-sig-name">truncate_utf8</a>(<span class="summary-sig-arg">string_</span>,
        <span class="summary-sig-arg">len_</span>,
        <span class="summary-sig-arg">wordsafe</span>=<span class="summary-sig-default">False</span>,
        <span class="summary-sig-arg">dots</span>=<span class="summary-sig-default">False</span>)</span><br />
      Truncate a UTF-8-encoded string safely to a number of characters.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.unicode-pysrc.html#truncate_utf8">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.unicode-module.html#mime_header_encode" class="summary-sig-name">mime_header_encode</a>(<span class="summary-sig-arg">string_</span>)</span><br />
      Encodes MIME/HTTP header values that contain non-ASCII, UTF-8 encoded
  characters.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.unicode-pysrc.html#mime_header_encode">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="mime_header_decode"></a><span class="summary-sig-name">mime_header_decode</span>(<span class="summary-sig-arg">header</span>)</span><br />
      Complement to mime_header_encode</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.unicode-pysrc.html#mime_header_decode">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_mime_header_decode"></a><span class="summary-sig-name">_mime_header_decode</span>(<span class="summary-sig-arg">matches</span>)</span><br />
      Helper function to mime_header_decode</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.unicode-pysrc.html#_mime_header_decode">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.unicode-module.html#decode_entities" class="summary-sig-name">decode_entities</a>(<span class="summary-sig-arg">text</span>,
        <span class="summary-sig-arg">exclude</span>=<span class="summary-sig-default"><code class="variable-group">[</code><code class="variable-group">]</code></span>)</span><br />
      Decode all HTML entities (including numerical ones) to regular UTF-8 bytes.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.unicode-pysrc.html#decode_entities">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.unicode-module.html#_decode_entities" class="summary-sig-name" onclick="show_private();">_decode_entities</a>(<span class="summary-sig-arg">prefix</span>,
        <span class="summary-sig-arg">codepoint</span>,
        <span class="summary-sig-arg">original</span>,
        <span class="summary-sig-arg">table</span>,
        <span class="summary-sig-arg">exclude</span>)</span><br />
      Helper function for decode_entities...</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.unicode-pysrc.html#_decode_entities">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="drupal_strlen"></a><span class="summary-sig-name">drupal_strlen</span>(<span class="summary-sig-arg">text</span>)</span><br />
      Count the amount of characters in a UTF-8 string+ This is less than or
equal to the byte count.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.unicode-pysrc.html#drupal_strlen">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="drupal_strtoupper"></a><span class="summary-sig-name">drupal_strtoupper</span>(<span class="summary-sig-arg">text</span>)</span><br />
      Uppercase a UTF-8 string.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.unicode-pysrc.html#drupal_strtoupper">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="drupal_strtolower"></a><span class="summary-sig-name">drupal_strtolower</span>(<span class="summary-sig-arg">text</span>)</span><br />
      Lowercase a UTF-8 string.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.unicode-pysrc.html#drupal_strtolower">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.unicode-module.html#_unicode_caseflip" class="summary-sig-name" onclick="show_private();">_unicode_caseflip</a>(<span class="summary-sig-arg">matches</span>)</span><br />
      Helper function for case conversion of Latin-1.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.unicode-pysrc.html#_unicode_caseflip">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="drupal_ucfirst"></a><span class="summary-sig-name">drupal_ucfirst</span>(<span class="summary-sig-arg">text</span>)</span><br />
      Capitalize the first letter of a UTF-8 string.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.unicode-pysrc.html#drupal_ucfirst">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="base.includes.unicode-module.html#drupal_substr" class="summary-sig-name">drupal_substr</a>(<span class="summary-sig-arg">text</span>,
        <span class="summary-sig-arg">start</span>,
        <span class="summary-sig-arg">length</span>=<span class="summary-sig-default">None</span>)</span><br />
      Cut off a piece of a string based on character indices and counts+ Follows
the same behavior as PHP's own substr() function.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="base.includes.unicode-pysrc.html#drupal_substr">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== VARIABLES ==================== -->
<a name="section-Variables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Variables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="multibyte"></a><span class="summary-name">multibyte</span> = <code title="1">1</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="UNICODE_ERROR"></a><span class="summary-name">UNICODE_ERROR</span> = <code title="-1">-1</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="UNICODE_SINGLEBYTE"></a><span class="summary-name">UNICODE_SINGLEBYTE</span> = <code title="0">0</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="UNICODE_MULTIBYTE"></a><span class="summary-name">UNICODE_MULTIBYTE</span> = <code title="1">1</code><br />
      Wrapper around _unicode_check().
    </td>
  </tr>
</table>
<!-- ==================== FUNCTION DETAILS ==================== -->
<a name="section-FunctionDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Function Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-FunctionDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="_unicode_check"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_unicode_check</span>()</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.unicode-pysrc.html#_unicode_check">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  Perform checks about Unicode support in PHP, and set the right settings if
needed.

Because Drupal needs to be able to handle text in various encodings, we do
not support mbstring function overloading+ HTTP input/output conversion must
be disabled for similar reasons.
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>errors</code></strong> - Whether to report any fatal errors with form_set_error().</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="drupal_xml_parser_create"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">drupal_xml_parser_create</span>(<span class="sig-arg">data</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.unicode-pysrc.html#drupal_xml_parser_create">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  Prepare a new XML parser.

This is a wrapper around xml_parser_create() which extracts the encoding from
the XML data first and sets the output encoding to UTF-8+ This function should
be used instead of xml_parser_create(), because PHP 4's XML parser doesn't
check the input encoding itself+ "Starting from PHP 5, the input encoding is
automatically detected, so that the encoding parameter specifies only the
output encoding."

This is also where unsupported encodings will be converted+ Callers should
take this into account: data might have been changed after the call.
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>&data</code></strong> - The XML data which will be parsed later.</li>
    </ul></dd>
    <dt>Returns:</dt>
        <dd>An XML parser object or FALSE on error.</dd>
  </dl>
</td></tr></table>
</div>
<a name="drupal_convert_to_utf8"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">drupal_convert_to_utf8</span>(<span class="sig-arg">data</span>,
        <span class="sig-arg">encoding</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.unicode-pysrc.html#drupal_convert_to_utf8">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  Convert data to UTF-8

Requires the iconv, GNU recode or mbstring PHP extension.
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>data</code></strong> - The data to be converted.</li>
        <li><strong class="pname"><code>encoding</code></strong> - The encoding that the data is in</li>
    </ul></dd>
    <dt>Returns:</dt>
        <dd>Converted data or False.</dd>
  </dl>
</td></tr></table>
</div>
<a name="drupal_truncate_bytes"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">drupal_truncate_bytes</span>(<span class="sig-arg">string_</span>,
        <span class="sig-arg">len_</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.unicode-pysrc.html#drupal_truncate_bytes">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  Truncate a UTF-8-encoded string safely to a number of bytes.

If the end position is in the middle of a UTF-8 sequence, it scans backwards
until the beginning of the byte sequence.

Use this function whenever you want to chop off a string at an unsure
location+ On the other hand, if you're sure that you're splitting on a
character boundary (e.g+ after using strpos() or similar), you can safely use
substr() instead.
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>string</code></strong> - The string to truncate.</li>
        <li><strong class="pname"><code>len</code></strong> - An upper limit on the returned string length.</li>
    </ul></dd>
    <dt>Returns:</dt>
        <dd>The truncated string.</dd>
  </dl>
</td></tr></table>
</div>
<a name="truncate_utf8"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">truncate_utf8</span>(<span class="sig-arg">string_</span>,
        <span class="sig-arg">len_</span>,
        <span class="sig-arg">wordsafe</span>=<span class="sig-default">False</span>,
        <span class="sig-arg">dots</span>=<span class="sig-default">False</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.unicode-pysrc.html#truncate_utf8">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  Truncate a UTF-8-encoded string safely to a number of characters.
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>string</code></strong> - The string to truncate.</li>
        <li><strong class="pname"><code>len</code></strong> - An upper limit on the returned string length.</li>
        <li><strong class="pname"><code>wordsafe</code></strong> - Flag to truncate at last space within the upper limit+ Defaults to False.</li>
        <li><strong class="pname"><code>dots</code></strong> - Flag to add trailing dots+ Defaults to False.</li>
    </ul></dd>
    <dt>Returns:</dt>
        <dd>The truncated string.</dd>
  </dl>
</td></tr></table>
</div>
<a name="mime_header_encode"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">mime_header_encode</span>(<span class="sig-arg">string_</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.unicode-pysrc.html#mime_header_encode">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  Encodes MIME/HTTP header values that contain non-ASCII, UTF-8 encoded
  characters.
 
  For example, mime_header_encode('test.txt') returns "=?UTF-8?B?dMOpc3QudHh0?=". (where the 'e' is acute)
 
  See http://www.rfc-editor.org/rfc/rfc2047.txt for more information.
 
  Notes:
  - Only encode strings that contain non-ASCII characters.
  - We progressively cut-off a chunk with truncate_utf8()+ This is to ensure
    each chunk starts and ends on a character boundary.
  - Using 
as the chunk separator may cause problems on some systems and may
    have to be changed to 
or .
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="decode_entities"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">decode_entities</span>(<span class="sig-arg">text</span>,
        <span class="sig-arg">exclude</span>=<span class="sig-default"><code class="variable-group">[</code><code class="variable-group">]</code></span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.unicode-pysrc.html#decode_entities">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  Decode all HTML entities (including numerical ones) to regular UTF-8 bytes.
Double-escaped entities will only be decoded once ("&amp;lt;" becomes "&lt;", not "<").
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>text</code></strong> - The text to decode entities in.</li>
        <li><strong class="pname"><code>exclude</code></strong> - An array of characters which should not be decoded+ For example,
  array('<', '&', '"')+ This affects both named and numerical entities.

DRUPY(BC): This function heavily modified</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="_decode_entities"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_decode_entities</span>(<span class="sig-arg">prefix</span>,
        <span class="sig-arg">codepoint</span>,
        <span class="sig-arg">original</span>,
        <span class="sig-arg">table</span>,
        <span class="sig-arg">exclude</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.unicode-pysrc.html#_decode_entities">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  Helper function for decode_entities

DRUPY(BC): This function heavily modified
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="_unicode_caseflip"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_unicode_caseflip</span>(<span class="sig-arg">matches</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.unicode-pysrc.html#_unicode_caseflip">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  Helper function for case conversion of Latin-1.
Used for flipping U+C0-U+DE to U+E0-U+FD and back.
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="drupal_substr"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">drupal_substr</span>(<span class="sig-arg">text</span>,
        <span class="sig-arg">start</span>,
        <span class="sig-arg">length</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="base.includes.unicode-pysrc.html#drupal_substr">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  Cut off a piece of a string based on character indices and counts+ Follows
the same behavior as PHP's own substr() function.

Note that for cutting off a string at a known character/substring
location, the usage of PHP's normal strpos/substr is safe and
much faster.
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="base-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Tue Jul  8 14:26:47 2008
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
